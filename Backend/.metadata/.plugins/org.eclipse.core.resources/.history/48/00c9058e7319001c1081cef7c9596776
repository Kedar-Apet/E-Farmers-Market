package com.app;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.time.LocalDate;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import com.app.dao.CropRepository;
import com.app.dao.UserRepository;
import com.app.pojos.Crop;
import com.app.pojos.User;
import com.app.service.ICropService;
import com.app.service.IUserService;

@SpringBootTest
class EFarmersMarketApplicationTests {
@Autowired
private ICropService cropService;

@Autowired
private UserRepository userRepo;
@Autowired
private CropRepository crops;
	@Test
	void testAdllCrops() {
		List<Crop> crops=cropService.getAllCrops(1);
		crops.forEach(System.out::println);
		assertEquals(1, crops.size());
	}
	@Test
	void testSaveCrops() {
		User users=userRepo.findById(1).orElseThrow();
		Set<User> user=new HashSet<>();
		user.add(users);
		Crop newCrop=new Crop("Wheat", 3, LocalDate.now(), 30.00);
		newCrop.setUsers(user);
		int i=1;
		cropService.addCrop(newCrop,i);
	}
	@Test
	void testGetAllCrops() {
		List<Crop> crop = crops.findByUsers_Id(1);
		assertEquals(1, crop.size());
	}

}
